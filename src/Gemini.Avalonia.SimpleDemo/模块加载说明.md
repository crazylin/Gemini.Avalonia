# Gemini.Avalonia.SimpleDemo - 模块加载说明

## 📋 概述

本文档说明如何在SimpleDemo中加载其他模块，如Output、Properties、ProjectManagement等功能模块。

## 🎯 已加载的模块

目前SimpleDemo已经加载了以下模块：

### 1. SimpleDemoModule（自定义模块）
- **功能**: 提供示例文档和欢迎页面
- **类型**: Core模块
- **文件位置**: `Framework/SimpleDemoModule.cs`

### 2. Output模块
- **功能**: 应用程序输出和日志显示
- **类型**: Feature模块
- **视图**: 输出窗口，显示应用日志和消息
- **工具栏**: 提供清除、复制等操作

### 3. Properties模块
- **功能**: 对象属性编辑和显示
- **类型**: Feature模块
- **视图**: 属性窗口，用于编辑选中对象的属性

## 🔧 加载模块的方法

### 方法1: 在初始化时添加（推荐）

在`SimpleDemoBootstrapper.Initialize()`方法中使用`AddModule<T>()`：

```csharp
public new SimpleDemoBootstrapper Initialize()
{
    // 添加核心模块
    AddModule<SimpleDemoModule>();
    
    // 添加功能模块
    AddModule<Gemini.Avalonia.Modules.Output.Module>();      // 输出模块
    AddModule<Gemini.Avalonia.Modules.Properties.Module>();  // 属性模块
    
    // 其他可用模块：
    // AddModule<Gemini.Avalonia.Modules.ProjectManagement.Module>();  // 项目管理
    // AddModule<Gemini.Avalonia.Modules.Settings.Module>();           // 设置
    // AddModule<Gemini.Avalonia.Modules.Theme.Module>();              // 主题
    
    base.Initialize();
    return this;
}
```

### 方法2: 动态加载（高级）

在运行时使用模块管理器动态加载：

```csharp
private async Task LoadAdditionalModulesAsync()
{
    if (_moduleManager != null)
    {
        // 注册并加载特定模块
        _moduleManager.RegisterModule(typeof(Gemini.Avalonia.Modules.Output.Module));
        await _moduleManager.LoadModuleAsync("OutputModule");
        
        // 或按类别加载
        await _moduleManager.LoadModulesByCategoryAsync(ModuleCategory.Feature);
    }
}
```

### 方法3: 按需加载（延迟加载）

对于支持延迟加载的模块，可以在需要时才加载：

```csharp
// 在需要时触发加载
var shell = IoC.Get<IShell>();
var outputTool = IoC.Get<OutputToolViewModel>();
shell.ShowTool(outputTool); // 自动触发模块加载
```

## 📦 可用的模块

### 核心功能模块

1. **MainMenu模块**
   - 类名: `Gemini.Avalonia.Modules.MainMenu.Module`
   - 功能: 主菜单系统
   - 类别: Core

2. **ToolBars模块**
   - 类名: `Gemini.Avalonia.Modules.ToolBars.Module`
   - 功能: 工具栏系统
   - 类别: UI

3. **StatusBar模块**
   - 类名: `Gemini.Avalonia.Modules.StatusBar.Module`
   - 功能: 状态栏
   - 类别: UI

### 功能扩展模块

4. **ProjectManagement模块**
   - 类名: `Gemini.Avalonia.Modules.ProjectManagement.Module`
   - 功能: 项目和文件管理
   - 类别: Feature
   - 视图: 项目资源管理器

5. **Settings模块**
   - 类名: `Gemini.Avalonia.Modules.Settings.Module`
   - 功能: 应用程序设置
   - 类别: Feature
   - 视图: 设置对话框

6. **Theme模块**
   - 类名: `Gemini.Avalonia.Modules.Theme.Module`
   - 功能: 主题切换（亮色/暗色）
   - 类别: Feature

7. **UndoRedo模块**
   - 类名: `Gemini.Avalonia.Modules.UndoRedo.Module`
   - 功能: 撤销/重做操作
   - 类别: Feature

8. **WindowManagement模块**
   - 类名: `Gemini.Avalonia.Modules.WindowManagement.Module`
   - 功能: 窗口管理和布局
   - 类别: Core

## 💡 添加模块示例

### 添加项目管理模块

```csharp
// 在SimpleDemoBootstrapper.Initialize()中添加
AddModule<Gemini.Avalonia.Modules.ProjectManagement.Module>();
```

这会添加：
- 项目资源管理器工具窗口
- 文件和文件夹管理功能
- 项目相关的菜单和命令

### 添加设置模块

```csharp
// 在SimpleDemoBootstrapper.Initialize()中添加
AddModule<Gemini.Avalonia.Modules.Settings.Module>();
```

这会添加：
- 设置对话框
- 应用程序配置管理
- 语言和主题设置

### 添加主题模块

```csharp
// 在SimpleDemoBootstrapper.Initialize()中添加
AddModule<Gemini.Avalonia.Modules.Theme.Module>();
```

这会添加：
- 亮色/暗色主题切换
- 主题资源管理
- 动态主题应用

## 🔍 模块加载顺序

模块按以下顺序加载：

1. **Core模块** (Priority 0-99) - 核心基础功能
2. **UI模块** (Priority 100-199) - 用户界面组件
3. **Feature模块** (Priority 200+) - 功能扩展

每个类别内部按Priority值排序，数值越小越先加载。

## 🛠️ 自定义模块

### 创建自定义模块

```csharp
[Export(typeof(IModule))]
public class MyCustomModule : ModuleBase
{
    public override void Initialize()
    {
        // 模块初始化逻辑
    }
    
    public override async Task PostInitializeAsync()
    {
        // 异步后初始化
    }
}
```

### 添加自定义模块

```csharp
// 在SimpleDemoBootstrapper中添加
AddModule<MyCustomModule>();
```

## 📝 注意事项

1. **依赖关系**: 确保模块的依赖项已经加载
2. **初始化顺序**: Core模块应在Feature模块之前加载
3. **性能考虑**: 只加载需要的模块，避免不必要的开销
4. **错误处理**: 模块加载失败不会影响其他模块
5. **延迟加载**: 支持延迟加载的模块可以按需加载

## 🎯 运行效果

添加模块后，SimpleDemo将显示：

- **输出窗口**: 显示应用程序日志和消息
- **属性窗口**: 显示和编辑对象属性
- **停靠窗口系统**: 支持窗口停靠和布局调整
- **工具栏**: 提供快速访问功能
- **菜单系统**: 完整的应用程序菜单

这使得SimpleDemo从一个基础的文档编辑器变成了一个功能完整的桌面应用程序框架演示！

---

*通过模块化设计，你可以根据需要灵活添加或移除功能，构建适合特定需求的应用程序。*
