<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:AuroraUI.Modules.Output.ViewModels"
             xmlns:conv="using:AuroraUI.Modules.Output.Converters"
             x:Class="AuroraUI.Modules.Output.Views.OutputToolView"
             x:DataType="vm:OutputToolViewModel">
    
    <Design.DataContext>
        <vm:OutputToolViewModel />
    </Design.DataContext>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        
        <!-- 工具栏 -->
        <Border Grid.Row="0" 
                Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                BorderThickness="0,0,0,1"
                Padding="8,4">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                
                <!-- 类别选择 -->
                <StackPanel Grid.Column="0" 
                            Orientation="Horizontal" 
                            Spacing="8"
                            VerticalAlignment="Center">
                    <TextBlock Text="{DynamicResource Output.ShowSource}" 
                               VerticalAlignment="Center" />
                    <ComboBox ItemsSource="{Binding Categories}"
                              SelectedItem="{Binding SelectedCategory}"
                              MinWidth="120"
                              VerticalAlignment="Center" />
                </StackPanel>
                
                <!-- 操作按钮 -->
                <StackPanel Grid.Column="2" 
                            Orientation="Horizontal" 
                            Spacing="4"
                            VerticalAlignment="Center">
                    <Button Content="{DynamicResource Output.Clear}" 
                            Command="{Binding ClearCommand}"
                            ToolTip.Tip="{DynamicResource Output.ClearTooltip}"
                            Padding="8,4" />
                    <Button Content="{DynamicResource Output.Copy}" 
                            Command="{Binding CopyCommand}"
                            ToolTip.Tip="{DynamicResource Output.CopyTooltip}"
                            Padding="8,4" />
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- 输出内容 -->
        <ScrollViewer Grid.Row="1" 
                      Name="OutputScrollViewer"
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Auto"
                      Background="{DynamicResource SystemControlBackgroundAltHighBrush}">
            <ItemsControl ItemsSource="{Binding FilteredMessages}"
                          Background="Transparent" />
        </ScrollViewer>
        
        <!-- 空状态 -->
        <Border Grid.Row="1"
                IsVisible="{Binding FilteredMessages.Count, Converter={x:Static conv:IntConverters.Equal}, ConverterParameter=0}"
                Background="{DynamicResource SystemControlBackgroundAltHighBrush}">
            <StackPanel HorizontalAlignment="Center" 
                        VerticalAlignment="Center"
                        Spacing="8">
                <Image Source="{SvgImage avares://AuroraUI/Assets/Icons/document.svg}" Width="32" Height="32" 
                               HorizontalAlignment="Center"
                               Opacity="0.5" />
                <TextBlock Text="{DynamicResource Output.NoOutput}" 
                           HorizontalAlignment="Center"
                           Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" />
                <TextBlock Text="{Binding SelectedCategory, StringFormat='当前类别 {0} 中没有消息'}"
                           HorizontalAlignment="Center"
                           FontSize="12"
                           Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" />
            </StackPanel>
        </Border>
    </Grid>
    
</UserControl>