<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Gemini.Avalonia.Demo.ViewModels"
             xmlns:conv="using:Gemini.Avalonia.Demo.Converters"
             x:Class="Gemini.Avalonia.Demo.Views.SampleDocumentView"
             x:DataType="vm:SampleDocumentViewModel">
    
    <Design.DataContext>
        <vm:SampleDocumentViewModel />
    </Design.DataContext>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        
        <!-- 工具栏 -->
        <Border Grid.Row="0" 
                Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                BorderThickness="0,0,0,1"
                Padding="8,4">
            <StackPanel Orientation="Horizontal" Spacing="8">
                <Button Content="{DynamicResource Demo.SaveButton}" 
                        Command="{Binding SaveCommand}"
                        IsEnabled="{Binding IsDirty}"
                        ToolTip.Tip="{DynamicResource Demo.SaveTooltip}" />
                <Button Content="{DynamicResource Demo.SaveAsButton}" 
                        Command="{Binding SaveAsCommand}"
                        ToolTip.Tip="{DynamicResource Demo.SaveAsTooltip}" />
                <Separator />
                <TextBlock Text="{Binding FilePath, StringFormat='路径: {0}'}"
                           VerticalAlignment="Center"
                           Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" />
            </StackPanel>
        </Border>
        
        <!-- 文本编辑器 -->
        <ScrollViewer Grid.Row="1" 
                      HorizontalScrollBarVisibility="Auto"
                      VerticalScrollBarVisibility="Auto">
            <TextBox Text="{Binding Content}"
                     AcceptsReturn="True"
                     AcceptsTab="True"
                     TextWrapping="NoWrap"
                     FontFamily="Consolas,Monaco,Courier New,monospace"
                     FontSize="14"
                     Background="Transparent"
                     BorderThickness="0"
                     Padding="12"
                     Watermark="{DynamicResource Demo.ContentPlaceholder}"
                     VerticalAlignment="Stretch"
                     HorizontalAlignment="Stretch" />
        </ScrollViewer>
        
        <!-- 状态栏 -->
        <Border Grid.Row="2" 
                Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                BorderThickness="0,1,0,0"
                Padding="8,4">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0"
                           Text="{Binding IsDirty, Converter={x:Static conv:BoolConverters.ToString}, ConverterParameter='已修改|已保存'}"
                           VerticalAlignment="Center"
                           Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" />
                
                <TextBlock Grid.Column="1"
                           Text="{Binding Content.Length, StringFormat='字符数: {0}'}"
                           VerticalAlignment="Center"
                           Margin="16,0,0,0"
                           Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" />
                
                <TextBlock Grid.Column="2"
                           Text="{DynamicResource Document.TextDocument}"
                           VerticalAlignment="Center"
                           Margin="16,0,0,0"
                           Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" />
            </Grid>
        </Border>
    </Grid>
    
</UserControl>